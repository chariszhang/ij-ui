function e(e,t,n){return t&&(t=t.toString()[1]?t:"0"+t),n&&(n=n.toString()[1]?n:"0"+n),e+(t?"-"+t:"")+(n?"-"+n:"")}function t(e){return new Date(e).getTime()}function n(t){if(!Array.isArray(t))return[];t=t||[];for(var n=[],a=0;a<t.length;a++){var i=t[a],r=new Date(i);if(isNaN(r.getTime()))console.error(i+" is invalid date");else{var s=e(r.getFullYear(),r.getMonth()+1,r.getDate());n.push(s)}}return n}function a(a){a=function(e,t,n){for(var a in t)!t.hasOwnProperty(a)||e.hasOwnProperty(a)&&!n||(e[a]=t[a]);return e}({},a,!0);var i,r=a.date?new Date(a.date):new Date,s=a.disabledDate?n(a.disabledDate):[],o=a.selectedDate?n(a.selectedDate):[],l=a.disabledBefore?t(a.disabledBefore):"",c=a.disabledAfter?t(a.disabledAfter):"",d=a.showToday,u=r.getFullYear(),f=r.getMonth(),h=r.getFullYear(),p=r.getMonth(),v=r.getDate(),b="",y=document.querySelector(a.el)||document.querySelector("body"),g=this,w=function(){for(var t=new Date(u,f+1,0).getDate(),n=new Date(u,f,1).getDay(),a=(t+n)%7==0?t+n:t+n+(7-(t+n)%7),i=new Date(u,f,0).getDate(),r=[],d=0;d<a;d++){var g=e(u,f+1,d+1-n),w=new Date(g).getTime(),D=s.indexOf(g)>-1,x=o.indexOf(g)>-1;if(d<n)r.push('<li class="other-month"><span class="dayStyle">'+(i-n+1+d)+"</span></li>");else if(d<n+t){var Y="";D?Y="disabled":(x&&(Y="selected-style"),b===g&&(Y="active-style"),e(h,p+1,v)===g&&(Y="today-flag")),l&&w<l&&(Y="disabled"),c&&w>c&&(Y="disabled"),r.push('<li class="current-month" ><span title='+g+' class="currentDate dayStyle '+Y+'">'+(d+1-n)+"</span></li>")}else r.push('<li class="other-month"><span class="dayStyle">'+(d+1-(n+t))+"</span></li>")}y.querySelector(".schedule-bd").innerHTML=r.join(""),y.querySelector(".edit-today-input").value=e(u,f+1)};this.nextMonthFun=function(){f+1>11?(u+=1,f=0):f+=1,w(),a.nextMonthCb&&a.nextMonthCb(u,f+1)},this.nextYearFun=function(){u+=1,w(),a.nextYeayCb&&a.nextYeayCb(u,f+1)},this.prevMonthFun=function(){f-1<0?(u-=1,f=11):f-=1,w(),a.prevMonthCb&&a.prevMonthCb(u,f+1)},this.prevYearFun=function(){u-=1,w(),a.prevYearCb&&a.prevYearCb(u,f+1)},this.renderToday=function(){if(a.clickCb){const t=new Date;a.clickCb(e(t.getFullYear(),t.getMonth()+1,t.getDate()))}},this.clearDate=function(){a.clickCb&&a.clickCb("")},this.editYears=function(){i.select(),i.focus()},y.innerHTML='<div class="schedule-hd"><div><span class="arrow icon iconfont icon-116leftarrowheads" id="prevYear" ></span><span class="arrow icon iconfont icon-112leftarrowhead" id="prevMonth"></span></div><input type="text" id="editYears" class="edit-today-input" maxlength="7"/><div><span class="arrow icon iconfont icon-111arrowheadright" id="nextMonth"></span><span class="arrow icon iconfont icon-115rightarrowheads" id="nextYear"></span></div></div><ul class="week-ul ul-box"><li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li></ul><ul class="schedule-bd ul-box" ></ul>'+(d?'<div class="row"> <span id="todayBtn" class="today">今天</span><span id="clearBtn" class="today">清空</span></div>':""),function(){y.addEventListener("click",(function(e){switch(e.target.id){case"nextMonth":g.nextMonthFun();break;case"nextYear":g.nextYearFun();break;case"prevMonth":g.prevMonthFun();break;case"prevYear":g.prevYearFun();break;case"todayBtn":g.renderToday();break;case"clearBtn":g.clearDate();break;case"editYears":g.editYears()}e.target.className.indexOf("currentDate")>-1&&(b=e.target.title,a.clickCb&&a.clickCb(b),w())}),!1),(i=y.querySelector(".edit-today-input")).addEventListener("focus",(function(){e=!1})),i.addEventListener("keydown",(function(e){/[\d-]/.test(e.key)||[38,40,37,39,46,36,35,8].includes(e.keyCode)||(e.stopPropagation(),e.preventDefault())})),i.addEventListener("input",(function(){const e=i.value;if(/^(\d{4})-(\d{2})$/.test(e)){const e=+RegExp.$1,t=+RegExp.$2;t>0&&t<13&&(u=e,f=t-1,w())}})),i.addEventListener("blur",(function(){w(),e=!0,t()}));let e=!0;function t(){setTimeout((function(){e&&a.blur&&a.blur()}))}y.addEventListener("focus",(function(){e=!1})),y.addEventListener("blur",(function(){t()}))}(),w()}export{a as default};
